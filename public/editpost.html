<!DOCTYPE html>
<html lang="en">

<head>
    <title>Edit Blogs</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <link rel="stylesheet" href="./css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="./css/animate.css">

    <link rel="stylesheet" href="./css/owl.carousel.min.css">
    <link rel="stylesheet" href="./css/owl.theme.default.min.css">
    <link rel="stylesheet" href="./css/magnific-popup.css">

    <link rel="stylesheet" href="./css/aos.css">

    <link rel="stylesheet" href="./css/ionicons.min.css">

    <link rel="stylesheet" href="./css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="./css/jquery.timepicker.css">
    <link href="./css/profile.css" rel="stylesheet" media="all">

    <link rel="stylesheet" href="./css/flaticon.css">
    <link rel="stylesheet" href="./css/icomoon.css">
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>

    <div id="colorlib-page">
        <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle"><i></i></a>
        <aside id="colorlib-aside" role="complementary" class="js-fullheight">
            <nav id="colorlib-main-menu" role="navigation">
                <ul>
                    <li><a href="travel.html">Home</a></li>
                    <li><a href="profile.html">My Blogs</a></li>
                    <li><a href="addblog.html">Add Blog</a></li>
                    <li><a href="updateDetail.html">Update Details</a></li>
                    <button class="btn btn--radius-2" style="background-color: rgb(195, 50, 98);color: whitesmoke;"
                        id="logout">LOGOUT</button>
                </ul>
            </nav>

            <div class="colorlib-footer">
                <h1 id="colorlib-logo" class="mb-5"><a href="" style="background-image: url(images/bg_1.jpg);">
                        <span id="nameAdd"></span></a></h1>
                <p class="pfooter">
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    Copyright &copy;
                    <script>document.write(new Date().getFullYear());</script> All rights reserved | <i
                        class="icon-heart" aria-hidden="true"></i> <a href="" target="_blank"></a>
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                </p>
            </div>
        </aside> <!-- END COLORLIB-ASIDE -->
        <div id="colorlib-main">
            <section class="ftco-about img ftco-section ftco-no-pt ftco-no-pb" id="about-section">
                <div class="container-fluid px-0">
                    <div class="row ">
                        <div class="col-md-10 ">
                            <form action="" id="PostForm" class="form-horizontal" method=""
                                onsubmit=event.preventDefault() style="padding-bottom: 210px;">
                                <br>
                                <br>
                                <h2 class="text-center" style="color: whitesmoke;">Enter the new details of the post
                                </h2>

                                <div class="form-row">
                                    <div class="name">Headline</div>
                                    <div class="value">
                                        <div class="input-group">
                                            <input class="input--style-6" type="text" name="headline" id="headline"
                                                placeholder="Enter the headline or what the post is about.." required>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="name">Message</div>
                                    <div class="value">
                                        <div class="input-group">
                                            <textarea class="textarea--style-6" type="text" name="message" id="message"
                                                placeholder="Enter any comment about the post" required></textarea>
                                        </div>
                                    </div>
                                </div>
                                <br><br>
                                <div class=" col-md-2 text-center mx-auto">
                                    <input type="submit" name="submit" value="Edit " class="btn btn-danger"
                                        id="editBtn">
                                </div>
                                <br>
                                <h4 class="text-center" id="uploadMsg"></h4>

                            </form>
                            <br>

                        </div>

                    </div>
                </div>

            </section>

        </div>
    </div>

    <!-- loader -->
    <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
            <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
            <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                stroke="#F96D00" /></svg></div>


    <script src="./js/jquery.min.js"></script>
    <script src="./js/jquery-migrate-3.0.1.min.js"></script>
    <script src="./js/popper.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/jquery.easing.1.3.js"></script>
    <script src="./js/jquery.waypoints.min.js"></script>
    <script src="./js/jquery.stellar.min.js"></script>
    <script src="./js/owl.carousel.min.js"></script>
    <script src="./js/jquery.magnific-popup.min.js"></script>
    <script src="./js/aos.js"></script>
    <script src="./js/jquery.animateNumber.min.js"></script>
    <script src="./js/scrollax.min.js"></script>
    <script src="./js/main.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>

    <script>

        var url1 = "http://localhost:5000";
        var urlParams = new URLSearchParams(location.search);
        var postId = urlParams.get('id');

        console.log(postId);
        $("#editBtn").click(function () {
            var newMessage = $("#message").val();
            var newHeadline = $("#headline").val();
            $.ajax({
                url: url1 + "/editPost",
                method: "POST",
                headers: {
                    "access-token": localStorage.getItem("token")
                },
                data: {
                    postId: postId,
                    newMessage: newMessage,
                    newHeadline: newHeadline
                },
                crossDomain: true,
                success: function (res) {

                    if (res.status == 200) {
                        console.log(res);
                        $("#uploadMsg").text(res.message);
                        window.location = "profile.html"
                    }
                    else {
                        console.log(res);
                        $("#uploadMsg").text(res.message);
                    }
                },

                error: function (err) {
                    console.log(err);
                }

            });
        })


        $.ajax({
            url: url1 + "/getPostById",
            method: "POST",
            headers: {
                "access-token": localStorage.getItem("token")
            },
            data: {
                postId: postId
            },
            crossDomain: true,
            success: function (res) {
                // console.log(res);
                $("#headline").val(res.headline);
                $("#message").val(res.message);
            },

            error: function (err) {
                console.log(err);
            }

        });

    </script>
</body>

</html>