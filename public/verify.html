<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Title Page-->
    <title>Verify page</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!-- Icons font CSS-->
    <link href="./vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">
    <link href="./vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <!-- Font special for pages-->
    <link
        href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Vendor CSS-->
    <link href="./vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="./vendor/datepicker/daterangepicker.css" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="./css/main.css" rel="stylesheet" media="all">
</head>

<body>
    <div class="page-wrapper bg-gra-01 p-t-180 p-b-100 font-poppins">



        <div class="wrapper wrapper--w780">

            <div class="card card-3">
                <div class="card-heading"></div>
                <div class="card-body">
                    <h2 class="title">Verify Info</h2>
                    <form method="" onsubmit=event.preventDefault()>
                        <div class="input-group">
                            <input class="input--style-3" type="text" placeholder="Email otp" name="otp" id="otp"
                                required>
                        </div>


                        <div class="p-t-10 text-center">
                            <button class="btn btn--pill btn--green" type="submit" onclick="execute()">Verify</button>
                        </div>
                        <br>
                    </form>
                    <div class="p-t-10 text-center">
                        <button class="btn btn--pill btn--purple "><a href="travel.html" class="btn--purple">Return to
                                home</a></button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Jquery JS-->
    <script src="./vendor/jquery/jquery.min.js"></script>
    <!-- Vendor JS-->
    <script src="./vendor/select2/select2.min.js"></script>
    <script src="./vendor/datepicker/moment.min.js"></script>
    <script src="./vendor/datepicker/daterangepicker.js"></script>

    <!-- Main JS-->
    <script src="./js/global.js"></script>

    <script>

        function execute() {
            let url1 = "http://localhost:5000";

            var otp = $("#otp").val();
            if (otp == "") {
                $("#otp").show();
                return;
            }

            $.ajax({
                url: url1 + "/verify",
                headers: {
                    "access-token": localStorage.getItem("token")
                },
                method: "POST",
                data: {
                    otp: otp
                },
                crossDomain: true,
                success: function (res) {
                    if (res.status !== 200) {
                        console.log(res);
                        // $("#message").text(res.message);
                        setTimeout(function () {
                            window.location.reload(true);
                        }, 2000);
                    }

                    else if (res.status === 200) {
                        console.log(res);
                        // $("#message").text(res.message);
                        //window.localStorage.setItem('token', res.token);
                        window.location = "login.html";
                    }

                },
                error: function (err) {
                    console.log(err);
                    alert(err);
                }


            });
        }



    </script>

</body>

</html>